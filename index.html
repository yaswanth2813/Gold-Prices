
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Andhra Pradesh Live Gold Rates</title>
    <style>
        :root {
            --primary: #D4AF37; /* Gold */
            --dark: #2c3e50;
            --light: #f8f9fa;
            --success: #27ae60;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .gold-widget {
            background: white;
            width: 380px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            border-top: 6px solid var(--primary);
        }

        .header {
            padding: 20px;
            text-align: center;
            background: #fff;
            border-bottom: 1px solid #eee;
        }

        .header h2 { margin: 0; color: var(--dark); font-size: 1.4rem; }
        .location { 
            color: #7f8c8d; font-size: 0.9rem; margin-top: 5px; 
            display: flex; justify-content: center; align-items: center; gap: 5px;
        }

        .refresh-btn {
            background: var(--dark);
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-top: 10px;
        }
        .refresh-btn:hover { background: #1a252f; }

        .rates-list { padding: 10px 20px; }

        .rate-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px dashed #e0e0e0;
        }
        
        .rate-item:last-child { border-bottom: none; }

        .karat-info { display: flex; flex-direction: column; }
        .karat-name { font-weight: 700; color: var(--dark); font-size: 1.1rem; }
        .karat-desc { font-size: 0.75rem; color: #95a5a6; }

        .price { font-weight: 700; font-size: 1.2rem; color: var(--dark); }
        .price.main { color: #d35400; font-size: 1.4rem; } /* Highlight 24k */

        .footer {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
            font-size: 0.75rem;
            color: #7f8c8d;
        }
        
        /* Loading State */
        .loading { text-align: center; padding: 20px; color: #7f8c8d; }
    </style>
</head>
<body>

<div class="gold-widget">
    <div class="header">
        <h2>Gold Rate Today</h2>
        <div class="location">üìç Andhra Pradesh, India</div>
        <button class="refresh-btn" onclick="fetchGoldRate()">üîÑ Refresh Price</button>
    </div>

    <div id="rates-container">
        <div class="loading">Loading live market data...</div>
    </div>

    <div class="footer">
        *Prices include approx 15% Import Duty + 3% GST.<br>
        Powered by GoldAPI.io
    </div>
</div>

    
<script>
    // YOUR CONFIGURATION
    const API_KEY = 'goldapi-5ksmk23ln5e-io'; 
    const ENDPOINT = 'https://www.goldapi.io/api/XAU/INR';

    async function fetchGoldRate() {
        const container = document.getElementById('rates-container');
        container.innerHTML = '<div class="loading">Updating rates...</div>';

        try {
            const response = await fetch(ENDPOINT, {
                method: 'GET',
                headers: {
                    'x-access-token': API_KEY,
                    'Content-Type': 'application/json'
                }
            });

            if (!response.ok) {
                throw new Error('API Limit Reached or Network Error');
            }

            const data = await response.json();

            // --- CALCULATION LOGIC FOR ANDHRA MARKET ---
            
            // 1. Get Raw Price per Gram (API gives price per Ounce)
            // 1 Ounce = 31.1035 Grams
            let rawPricePerGram = data.price / 31.1035;

            // 2. Add Indian Taxes (Import Duty 15% + GST 3% + Local Premium)
            // International spot price is cheaper than Indian market price.
            // We multiply by 1.185 to approximate the real shop price in AP.
            let marketPrice24k = rawPricePerGram * 1.105;

            // 3. Calculate Purities
            const rates = {
                k24: Math.floor(marketPrice24k),
                k22: Math.floor(marketPrice24k * 0.916),
                k20: Math.floor(marketPrice24k * 0.833),
                k18: Math.floor(marketPrice24k * 0.750)
            };

            // 4. Update UI
            container.innerHTML = `
                <div class="rate-item">
                    <div class="karat-info">
                        <span class="karat-name">24 Karat</span>
                        <span class="karat-desc">99.9% Pure Gold</span>
                    </div>
                    <div class="price main">‚Çπ${rates.k24.toLocaleString('en-IN')}</div>
                </div>

                <div class="rate-item">
                    <div class="karat-info">
                        <span class="karat-name">22 Karat</span>
                        <span class="karat-desc">Standard Jewellery</span>
                    </div>
                    <div class="price">‚Çπ${rates.k22.toLocaleString('en-IN')}</div>
                </div>

                <div class="rate-item">
                    <div class="karat-info">
                        <span class="karat-name">20 Karat</span>
                        <span class="karat-desc">Traditional / Antique</span>
                    </div>
                    <div class="price">‚Çπ${rates.k20.toLocaleString('en-IN')}</div>
                </div>

                <div class="rate-item">
                    <div class="karat-info">
                        <span class="karat-name">18 Karat</span>
                        <span class="karat-desc">Diamond / Stone Work</span>
                    </div>
                    <div class="price">‚Çπ${rates.k18.toLocaleString('en-IN')}</div>
                </div>
            `;

        } catch (error) {
            console.error(error);
            container.innerHTML = `
                <div style="text-align:center; padding:20px; color:red;">
                    <strong>Error:</strong> Failed to load.<br>
                    <small>Check your API Key quota.</small>
                </div>`;
        }
    }

    // Run on Page Load
    fetchGoldRate();

</script>

</body>
</html>
